{"config":{"separator":"[\\s\\-_,:!=\\[\\]()\\\\\"`/]+|\\.(?!\\d)"},"items":[{"location":"","level":1,"title":"Introduction","text":"<p>Welcome to the Aurix Integration Hub. This guide helps partners and developers connect with the Aurix platform.</p>","path":["Introduction"],"tags":[]},{"location":"#collaboration","level":2,"title":"Collaboration","text":"<p>This documentation is built for our partners. We know every system is different, and we are ready to adapt.</p> <p>Our Commitment: If specific endpoints, data structures, or webhooks are identified that would streamline the integration, please contact our development team. We are eager to collaborate and implement solutions that ensure the integration goes smoothly.</p>","path":["Introduction"],"tags":[]},{"location":"#about-aurix","level":2,"title":"About Aurix","text":"<p>Aurix enables businesses to connect their social media accounts to intelligent AI tools. Once connected, we can securely push and share collected data, such as qualified leads and widget interaction details,directly with your system in real time. Our API and webhooks enable seamless synchronization, allowing your platform to immediately receive and act on new information gathered by our AI agents.</p> <ul> <li>Lead Gen Agent: Automatically collects and qualifies user details via chat. It sends structured lead data to your system based on your settings.</li> <li>FAQ Agent: Instantly answers customer questions using a verified knowledge base.</li> </ul>","path":["Introduction"],"tags":[]},{"location":"#whatsapp-widget","level":2,"title":"WhatsApp Widget","text":"<p>The WhatsApp Widget embeds a chat interface on websites. It links web traffic data (like UTM parameters) to WhatsApp conversations to track attribution from ad clicks to messages.</p> <p>How it Works:</p> <ol> <li>Captures Traffic Data: A lightweight script on the website captures URL parameters (UTM, GCLID), source URLs, and device identifiers.</li> <li>Generates Correlation: When a user clicks to chat, the system generates a unique Correlation ID (e.g., <code>O-xY123z</code>).</li> <li>Links Conversation: This ID is embedded in the pre-filled WhatsApp message. When the user sends it, the web session data is permanently linked to the new lead.</li> </ol> <p>Development Status</p> <p>The WhatsApp widget is currently in active development.</p> <ul> <li>Now: Supports URL parsing, click tracking, and basic correlation.</li> <li>Coming Soon: Advanced device tracking, network and page context.</li> </ul>","path":["Introduction"],"tags":[]},{"location":"#current-vs-planned-tracking-capabilities","level":2,"title":"Current vs Planned Tracking Capabilities","text":"Feature Status Details Raw IP Address Available. Raw User-Agent Available. Landing Page URL Available. Parsed Ad Params Available. • Full \"Capture Everything\" approach with raw parsing. • No Truncation: We do not filter or truncate keys. We store every parameter as presented in the URL.• Duplicate Handling: Automatically converts duplicate keys (e.g., multiple <code>utm_source</code>) into arrays (<code>[\"google\", \"search\"]</code>). Network Not available. (Carrier/ASN/Geo-location). Device Fingerprinting Not available. Page Context Not available. (Referrer URLs and Page Titles are not currently captured).","path":["Introduction"],"tags":[]},{"location":"external-integration/","level":1,"title":"External Integration","text":"<p>Aurix can send event notifications to your specified endpoint using webhooks. This  integration allows you to receive real-time updates for supported events directly to your  backend system. This document serves as the technical reference for integrating with the Aurix platform. It covers authentication, webhook configuration, event schemas, and the Leads API.</p> <p>For a step-by-step implementation guide, please refer to the Integration Tutorial.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#api-overview","level":2,"title":"API Overview","text":"<p>Base URL: <code>https://chatbot-api.oomdigital.com</code></p> <p>All API requests must be made over HTTPS.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#authentication","level":3,"title":"Authentication","text":"<p>Access to the Integration API is protected by a Bearer Token. You must include your <code>INTEGRATION_API_KEY</code> in the <code>Authorization</code> header of every request. You can request for this key from the Aurix team.</p> <pre><code>Authorization: Bearer &lt;YOUR_INTEGRATION_API_KEY&gt;\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#webhooks","level":2,"title":"Webhooks","text":"<p>Webhooks allow your system to receive real-time notifications about lead activities and widget interactions.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#1-configuration","level":3,"title":"1. Configuration","text":"<p>To start receiving events, you must register your webhook listener URL.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#register-or-update-url","level":4,"title":"Register or Update URL","text":"<p>Endpoint: <code>PUT /integrations/topkee/webhook-config</code></p> <p>Registers or updates the URL where Aurix will send <code>POST</code> requests.</p> Request<pre><code>curl -X PUT \\\n  \"https://chatbot-api.oomdigital.com/integrations/topkee/webhook-config\" \\\n  -H \"Authorization: Bearer &lt;YOUR_INTEGRATION_API_KEY&gt;\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"url\": \"https://your-backend.com/webhooks/aurix\"\n  }'\n</code></pre> Response<pre><code>{\n  \"id\": \"dc2321f2-6a75-4d50-8861-3ea24ca29a84\",\n  \"service_name\": \"topkee\",\n  \"target_url\": \"https://your-backend.com/webhooks/aurix\",\n  \"secret\": \"aurix_pzgwhW5X...\",\n  \"is_active\": true\n}\n</code></pre> <p>Important</p> <p>Save the <code>secret</code> from the response. You will need it to verify the <code>x-hub-signature</code> header on incoming events.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#get-configuration","level":4,"title":"Get Configuration","text":"<p>Endpoint: <code>GET /integrations/topkee/webhook-config</code></p> <p>Retrieves your current webhook settings.</p> Request<pre><code>curl -X GET \\\n  \"https://chatbot-api.oomdigital.com/integrations/topkee/webhook-config\" \\\n  -H \"Authorization: Bearer &lt;YOUR_KEY&gt;\"\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#2-event-payloads","level":3,"title":"2. Event Payloads","text":"<p>Aurix sends JSON payloads for the following events.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#widgetclick","level":4,"title":"<code>widget.click</code>","text":"<p>Triggers when a visitor clicks the WhatsApp widget. Contains \"First Touch\" attribution.</p> <pre><code>{\n  \"event_type\": \"widget.click\",\n  \"event_id\": \"evt_1704200000\",\n  \"timestamp\": \"2024-01-02T12:00:00Z\",\n  \"data\": {\n    \"correlation_id\": \"O-vpbWx3M\",\n    \"device_id\": \"9fad5f62-2d08-49d4-852a-b48be43beb68\",\n    \"click_url\": \"https://example.com/landing?utm_source=google\",\n    \"parsed_params\": {\n      \"utm_source\": \"google\"\n    },\n    \"ip_address\": \"127.0.0.1\",\n    \"user_agent\": \"Mozilla/5.0...\"\n  }\n}\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#leadcorrelated","level":4,"title":"<code>lead.correlated</code>","text":"<p>Triggers when an anonymous visitor sends their first message. Links the <code>correlation_id</code> to a phone number.</p> <pre><code>{\n  \"event_type\": \"lead.correlated\",\n  \"event_id\": \"evt_1704200500\",\n  \"timestamp\": \"2024-01-02T12:05:00Z\",\n  \"data\": {\n    \"correlation_id\": \"O-vpbWx3M\",\n    \"conversation_id\": 3293,\n    \"phone_number\": \"6512345678\",\n    \"lead_status\": \"correlated\",\n    \"channel_id\": \"791163770738681\"\n  }\n}\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#3-security","level":3,"title":"3. Security","text":"<p>Every webhook request includes an <code>x-hub-signature</code> header. This is an HMAC-SHA256 signature generated using your <code>secret</code>. Always verify this signature to ensure the request is genuine.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#leads-api","level":2,"title":"Leads API","text":"<p>Fetch lead data and attribution logs programmatically.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#get-leads","level":3,"title":"Get Leads","text":"<p>Endpoint: <code>GET /integrations/topkee/leads</code></p> <p>Returns a list of leads with their status, collected form data, and attribution info.</p> <p>Query Parameters: *   <code>limit</code>: (int) Max records to return (default 50). *   <code>offset</code>: (int) Pagination offset. *   <code>from_date</code>: (ISO 8601) Filter start date. *   <code>to_date</code>: (ISO 8601) Filter end date.</p> Request<pre><code>curl -X GET \\\n  \"https://chatbot-api.oomdigital.com/integrations/topkee/leads?limit=5\" \\\n  -H \"Authorization: Bearer &lt;YOUR_INTEGRATION_API_KEY&gt;\"\n</code></pre> Response<pre><code>{\n  \"status\": 200,\n  \"message\": \"ok\",\n  \"data\": [\n    {\n      \"lead_id\": 470,\n      \"lead_status\": \"active\",\n      \"lead_json\": {\n        \"contact_name\": \"Jane Doe\",\n        \"contact_number\": \"6587487282\",\n        \"contact_email\": \"jane@example.com\",\n        \"preferred_outlet\": \"Orchard Gateway\",\n        \"selected_service\": \"Eyelash Extensions\",\n        \"preferred_date_time\": \"1 January 2026\"\n      },\n      \"created_at\": \"2025-12-31T12:20:16.583181Z\",\n      \"updated_at\": \"2026-01-02T01:38:05.868837Z\",\n      \"click_url\": null,\n      \"parsed_params\": null,\n      \"ip_address\": null,\n      \"user_agent\": null\n    }\n  ]\n}\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#get-attribution-logs","level":3,"title":"Get Attribution Logs","text":"<p>Endpoint: <code>GET /integrations/topkee/attribution</code></p> <p>Retrieves raw widget click logs, useful for auditing traffic sources.</p> Request<pre><code>curl -X GET \\\n  \"https://chatbot-api.oomdigital.com/integrations/topkee/attribution?limit=5\" \\\n  -H \"Authorization: Bearer &lt;YOUR_KEY&gt;\"\n</code></pre> Response<pre><code>{\n  \"status\": 200,\n  \"message\": \"ok\",\n  \"data\": [\n    {\n      \"wa_inbound_source_correlation_id\": \"O-vpbWx3M\",\n      \"wa_inbound_source_device_id\": \"9fad5f62-2d08-49d4-852a-b48be43beb68\",\n      \"created_at\": \"2026-01-02T11:17:02.644566Z\",\n      \"wa_inbound_source_click_url\": \"http://example.com/auth/login\",\n      \"wa_inbound_source_first_raw_url\": \"http://example.com/auth/login\",\n      \"wa_inbound_source_parsed_params\": {},\n      \"wa_inbound_source_ip_address\": \"127.0.0.1\",\n      \"wa_inbound_source_user_agent\": \"Mozilla/5.0...\"\n    }\n  ]\n}\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"tutorial-webhook-integration/","level":1,"title":"Step-by-Step Integration Guide","text":"<p>This guide will walk you through the end-to-end process of integrating with Aurix. You will learn how to set up a webhook listener, expose it to the internet, and register it with our API to receive real-time event notifications.</p>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#prerequisites","level":2,"title":"Prerequisites","text":"<ul> <li>API Key: You should have received a <code>Bearer</code> token (API Key) from the Aurix team.</li> <li>Python Installed: This guide uses Python for the example listener, but you can use any language.</li> </ul>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#step-1-create-a-webhook-listener","level":2,"title":"Step 1: Create a Webhook Listener","text":"<p>First, you need a server to receive the webhook <code>POST</code> requests. Below is a production-ready Python script using <code>FastAPI</code> that listens for events and verifies the security signature.</p> <p>Create a file named <code>webhook_listener.py</code>:</p> <pre><code>import uvicorn\nfrom fastapi import FastAPI, Request, HTTPException, Header\nimport logging\nimport hmac\nimport hashlib\nimport os\n\n# Configuration\n# The secret you receive from Aurix after registering your URL\nWEBHOOK_SECRET = os.environ.get(\"AURIX_WEBHOOK_SECRET\", \"your_shared_secret_here\")\n\n# Configure logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(\"webhook_listener\")\n\napp = FastAPI()\n\ndef verify_signature(payload: bytes, signature_header: str, secret: str) -&gt; bool:\n    \"\"\"Verifies the HMAC-SHA256 signature.\"\"\"\n    if not signature_header:\n        return False\n\n    # Calculate expected signature\n    expected_signature = hmac.new(\n        secret.encode(\"utf-8\"),\n        payload,\n        hashlib.sha256\n    ).hexdigest()\n\n    return hmac.compare_digest(expected_signature, signature_header)\n\n@app.post(\"/webhook\")\nasync def receive_webhook(\n    request: Request, \n    x_hub_signature: str = Header(None)\n):\n    # 1. Read the raw body\n    raw_body = await request.body()\n\n    # 2. Verify Signature\n    # It is critical to verify the request came from Aurix\n    if not verify_signature(raw_body, x_hub_signature, WEBHOOK_SECRET):\n        logger.warning(\"Received request with invalid signature.\")\n        raise HTTPException(status_code=401, detail=\"Invalid signature\")\n\n    # 3. Parse and Process\n    try:\n        body = await request.json()\n        event_type = body.get(\"event_type\")\n\n        logger.info(f\"Received valid event: {event_type}\")\n        logger.info(f\"Data: {body}\")\n\n        # Add your business logic here\n        if event_type == \"widget.click\":\n            # Handle click tracking\n            pass\n        elif event_type == \"lead.correlated\":\n            # Handle new lead\n            pass\n\n        return {\"status\": \"received\"}\n\n    except Exception as e:\n        logger.error(f\"Error processing webhook: {e}\")\n        raise HTTPException(status_code=500, detail=\"Internal processing error\")\n\nif __name__ == \"__main__\":\n    print(\"Starting Webhook Listener on http://localhost:8005/webhook\")\n    uvicorn.run(app, host=\"0.0.0.0\", port=8005)\n</code></pre>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#install-dependencies","level":3,"title":"Install Dependencies","text":"<pre><code>pip install fastapi uvicorn\n</code></pre>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#run-the-listener","level":3,"title":"Run the Listener","text":"<pre><code>python webhook_listener.py\n</code></pre>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#step-2-expose-your-listener","level":2,"title":"Step 2: Expose Your Listener","text":"<p>Aurix needs to reach your listener over the public internet. For development, you can use a tool like ngrok to create a secure tunnel to your localhost.</p> <ol> <li>Start ngrok:     <pre><code>ngrok http 8005\n</code></pre></li> <li>Copy the URL: ngrok will give you a public HTTPS URL (e.g., <code>https://a1b2-c3d4.ngrok.io</code>).</li> <li>Append the path: Your full webhook URL will be <code>https://a1b2-c3d4.ngrok.io/webhook</code>.</li> </ol>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#step-3-register-your-webhook","level":2,"title":"Step 3: Register Your Webhook","text":"<p>Now you must tell Aurix where to send the events. You will use the Configuration API to set your URL.</p> <p>Endpoint: <code>PUT https://chatbot-api.oomdigital.com/integrations/topkee/webhook-config</code></p> <p>Command:</p> <p>Replace <code>&lt;YOUR_API_KEY&gt;</code> with the key provided to you, and <code>&lt;YOUR_WEBHOOK_URL&gt;</code> with your public URL from Step 2.</p> <pre><code>curl -X PUT \"https://chatbot-api.oomdigital.com/integrations/topkee/webhook-config\" \\\n     -H \"Content-Type: application/json\" \\\n     -H \"Authorization: Bearer &lt;YOUR_API_KEY&gt;\" \\\n     -d '{\n           \"url\": \"&lt;YOUR_WEBHOOK_URL&gt;\"\n         }'\n</code></pre>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#save-the-secret","level":3,"title":"Save the Secret!","text":"<p>The API will respond with a JSON object containing a <code>secret</code>.</p> <pre><code>{\n  \"id\": \"...\",\n  \"service_name\": \"topkee\",\n  \"target_url\": \"https://a1b2-c3d4.ngrok.io/webhook\",\n  \"secret\": \"aurix_8f7d9a8b...\", \n  \"is_active\": true\n}\n</code></pre> <p>Copy the <code>secret</code> value. Stop your python script, set this as an environment variable (or update the code), and restart the listener. This secret is required to pass the signature verification in Step 1.</p> <pre><code>export AURIX_WEBHOOK_SECRET=\"aurix_8f7d9a8b...\"\npython webhook_listener.py\n</code></pre>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#step-4-receive-events","level":2,"title":"Step 4: Receive Events","text":"<p>Once registered, Aurix will immediately begin sending events to your URL.</p>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#example-widget-click-event","level":3,"title":"Example: Widget Click Event","text":"<p>When a user clicks the WhatsApp widget, your listener will receive:</p> <pre><code>{\n  \"event_type\": \"widget.click\",\n  \"event_id\": \"evt_1704200000\",\n  \"timestamp\": \"2024-01-02T12:00:00Z\",\n  \"data\": {\n    \"correlation_id\": \"wa_123456\",\n    \"click_url\": \"https://example.com/landing?utm_source=google\",\n    \"parsed_params\": {\n      \"utm_source\": \"google\"\n    },\n    \"ip_address\": \"1.2.3.4\",\n    \"user_agent\": \"Mozilla/5.0...\"\n  }\n}\n</code></pre>","path":["Integration Tutorial"],"tags":[]},{"location":"tutorial-webhook-integration/#example-lead-correlated-event","level":3,"title":"Example: Lead Correlated Event","text":"<p>When that user sends a message and is identified:</p> <pre><code>{\n  \"event_type\": \"lead.correlated\",\n  \"event_id\": \"evt_1704200500\",\n  \"timestamp\": \"2024-01-02T12:05:00Z\",\n  \"data\": {\n    \"correlation_id\": \"wa_123456\",\n    \"conversation_id\": 987,\n    \"phone_number\": \"+15551234567\",\n    \"lead_status\": \"correlated\",\n    \"channel_id\": \"...\"\n  }\n}\n</code></pre> <p>You have now successfully integrated with Aurix!</p>","path":["Integration Tutorial"],"tags":[]}]}