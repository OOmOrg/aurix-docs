{"config":{"separator":"[\\s\\-_,:!=\\[\\]()\\\\\"`/]+|\\.(?!\\d)"},"items":[{"location":"","level":1,"title":"Introduction","text":"<p>Welcome to the Aurix Integration Hub. This guide helps partners and developers connect with the Aurix platform.</p>","path":["Introduction"],"tags":[]},{"location":"#collaboration","level":2,"title":"Collaboration","text":"<p>This documentation is built for our partners. We know every system is different, and we are ready to adapt.</p> <p>Our Commitment: If specific endpoints, data structures, or webhooks are identified that would streamline the integration, please contact our development team. We are eager to collaborate and implement solutions that ensure the integration goes smoothly.</p>","path":["Introduction"],"tags":[]},{"location":"#about-aurix","level":2,"title":"About Aurix","text":"<p>Aurix enables businesses to connect their social media accounts to intelligent AI tools. Once connected, we can securely push and share collected data, such as qualified leads and widget interaction details,directly with your system in real time. Our API and webhooks enable seamless synchronization, allowing your platform to immediately receive and act on new information gathered by our AI agents.</p> <ul> <li>Lead Gen Agent: Automatically collects and qualifies user details via chat. It sends structured lead data to your system based on your settings.</li> <li>FAQ Agent: Instantly answers customer questions using a verified knowledge base.</li> </ul>","path":["Introduction"],"tags":[]},{"location":"#whatsapp-widget","level":2,"title":"WhatsApp Widget","text":"<p>The WhatsApp Widget embeds a chat interface on websites. It links web traffic data (like UTM parameters) to WhatsApp conversations to track attribution from ad clicks to messages.</p> <p>How it Works:</p> <ol> <li>Captures Traffic Data: A lightweight script on the website captures URL parameters (UTM, GCLID), source URLs, and device identifiers.</li> <li>Generates Correlation: When a user clicks to chat, the system generates a unique Correlation ID (e.g., <code>O-xY123z</code>).</li> <li>Links Conversation: This ID is embedded in the pre-filled WhatsApp message. When the user sends it, the web session data is permanently linked to the new lead.</li> </ol> <p>Development Status</p> <p>The WhatsApp widget is currently in active development.</p> <ul> <li>Now: Supports URL parsing, click tracking, and basic correlation.</li> <li>Coming Soon: Advanced device tracking, network and page context.</li> </ul>","path":["Introduction"],"tags":[]},{"location":"#current-vs-planned-tracking-capabilities","level":2,"title":"Current vs Planned Tracking Capabilities","text":"Feature Status Details Raw IP Address Available. Raw User-Agent Available. Landing Page URL Available. Parsed Ad Params Available. • Full \"Capture Everything\" approach with raw parsing. • No Truncation: We do not filter or truncate keys. We store every parameter as presented in the URL.• Duplicate Handling: Automatically converts duplicate keys (e.g., multiple <code>utm_source</code>) into arrays (<code>[\"google\", \"search\"]</code>). Network Not available. (Carrier/ASN/Geo-location). Device Fingerprinting Not available. Page Context Not available. (Referrer URLs and Page Titles are not currently captured).","path":["Introduction"],"tags":[]},{"location":"external-integration/","level":1,"title":"External Integration","text":"<p>Aurix can send event notifications to your specified endpoint using webhooks. This integration allows you to receive real-time updates for supported events directly to your backend system. Additionally, the Leads API allows integration partners to fetch batched lead data and attribution logs programmatically.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#webhooks","level":2,"title":"Webhooks","text":"<p>Aurix sends webhook notifications as <code>POST</code> requests to your specified endpoint. Each request contains a JSON payload with information about the event that occurred.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#supported-events","level":3,"title":"Supported Events","text":"<p>The webhooks support the following events:</p> <ul> <li><code>widget.click</code>: Triggers immediately when a visitor clicks the WhatsApp widget. Captures the \"First Touch\" attribution data.</li> <li><code>lead.correlated</code>: Triggers when an anonymous visitor sends their first message. This event links the <code>correlation_id</code> (from the click) to a specific phone number.</li> <li><code>lead.complete</code>: Triggers when a lead is marked as complete. This event sends the full lead details including name, email, and phone number collected by the AI agent.</li> </ul>","path":["External Integration"],"tags":[]},{"location":"external-integration/#configuration","level":3,"title":"Configuration","text":"<p>To start receiving events, you must register your webhook URL via the API. This configuration endpoint is protected and requires your Integration API Key.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#register-or-update-url","level":4,"title":"Register or Update URL","text":"<p>Registers or updates the webhook URL where you will receive events. Returns a <code>secret</code> used for signature verification.</p> <p>Endpoint: <code>PUT /api/integrations/topkee/webhook-config</code></p> Request<pre><code>curl -X PUT \\\n  \"https://chatbot.oomdigital.com/api/integrations/topkee/webhook-config\" \\\n  -H \"Authorization: Bearer &lt;TOPKEE_INTEGRATION_API_KEY&gt;\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"url\": \"https://your-backend.com/webhooks/aurix\"\n  }'\n</code></pre> Response<pre><code>{\n  \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n  \"service_name\": \"topkee\",\n  \"target_url\": \"https://your-backend.com/webhooks/aurix\",\n  \"secret\": \"aurix_8f7d6e5c4b3a2...\",\n  \"is_active\": true\n}\n</code></pre> <p>Important</p> <p>Store the <code>secret</code> securely. You will need it to verify the <code>x-hub-signature</code> header of incoming webhook requests.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#get-current-configuration","level":4,"title":"Get Current Configuration","text":"<p>Retrieves the current webhook configuration.</p> <p>Endpoint: <code>GET /api/integrations/topkee/webhook-config</code></p> Request<pre><code>curl -X GET \\\n  \"https://chatbot.oomdigital.com/api/integrations/topkee/webhook-config\" \\\n  -H \"Authorization: Bearer &lt;TOPKEE_INTEGRATION_API_KEY&gt;\"\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#webhook-authentication","level":3,"title":"Webhook Authentication","text":"<p>Webhook authentication ensures that incoming webhook requests are securely verified before processing. This allows consumers to trust that webhook events originate from a secure and verified source.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#verifying-the-signature","level":4,"title":"Verifying the Signature","text":"<p>Each webhook request sent from the server includes an <code>x-hub-signature</code> header containing a SHA-256 HMAC signature of the request payload.</p> <ol> <li>Receive the Webhook: Extract the payload and the <code>x-hub-signature</code> header.</li> <li>Verify the Signature:<ul> <li>Compute the HMAC SHA-256 signature using the raw request body and the shared secret key.</li> <li>Compare the computed signature to the header value.</li> <li>If they match, the request is verified as authentic.</li> </ul> </li> </ol> verification.py<pre><code>import hmac\nimport hashlib\n\ndef verify_signature(payload_body: str, signature_header: str, secret: str) -&gt; bool:\n    expected = hmac.new(\n        secret.encode('utf-8'), \n        payload_body.encode('utf-8'), \n        hashlib.sha256\n    ).hexdigest()\n\n    return hmac.compare_digest(expected, signature_header)\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#event-reference-payloads","level":3,"title":"Event Reference &amp; Payloads","text":"<p>Understanding the lead journey helps interpret the events:</p> <ol> <li>Widget Interaction: User clicks widget (<code>widget.click</code>).</li> <li>Correlation: User sends a message (<code>lead.correlated</code>). The lead is \"incomplete\" as the AI is still collecting info.</li> <li>Completion: AI collects required fields (<code>lead.complete</code>).</li> </ol>","path":["External Integration"],"tags":[]},{"location":"external-integration/#common-schema","level":4,"title":"Common Schema","text":"<p>All events share the following top-level structure:</p> Field Type Description <code>event_type</code> String Name of the event type (e.g., <code>widget.click</code>). <code>event_id</code> String Unique identifier for this specific event instance. <code>timestamp</code> String ISO 8601 timestamp of when the event occurred. <code>data</code> Object Event-specific payload containing attribution or lead details.","path":["External Integration"],"tags":[]},{"location":"external-integration/#widgetclick","level":4,"title":"widget.click","text":"<pre><code>{\n  \"event_type\": \"widget.click\",\n  \"timestamp\": \"2024-01-23T10:30:00.123Z\",\n  \"data\": {\n    \"correlation_id\": \"O-xY123z\",\n    \"device_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"click_url\": \"https://example.com/landing?utm_source=google&amp;gclid=AbCd123\",\n    \"parsed_params\": {\n      \"utm_source\": \"google\",\n      \"utm_medium\": \"cpc\",\n      \"gclid\": \"AbCd123\"\n    },\n    \"user_agent\": \"Mozilla/5.0...\",\n    \"ip_address\": \"192.168.1.1\" \n  }\n}\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#leadcorrelated","level":4,"title":"lead.correlated","text":"<p>Note</p> <p>A correlated lead may initially have partial information while the AI engages the user.</p> <pre><code>{\n  \"event_type\": \"lead.correlated\",\n  \"timestamp\": \"2024-01-23T10:35:00.456Z\",\n  \"data\": {\n    \"correlation_id\": \"O-xY123z\",\n    \"conversation_id\": 105,\n    \"phone_number\": \"+1234567890\",\n    \"lead_status\": \"correlated\",\n    \"channel_id\": \"791163770738681\"\n  }\n}\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#leadcomplete","level":4,"title":"lead.complete","text":"<p>Fired when the AI has collected all required lead information.</p> <pre><code>{\n  \"event_type\": \"lead.complete\",\n  \"timestamp\": \"2024-01-23T10:45:00.789Z\",\n  \"data\": {\n    \"correlation_id\": \"O-xY123z\",\n    \"conversation_id\": 105,\n    \"lead_status\": \"complete\",\n    \"lead_data\": {\n        \"name\": \"John Doe\",\n        \"email\": \"john.doe@example.com\",\n        \"phone\": \"+1234567890\",\n        \"company\": \"Acme Corp\",\n        \"intent\": \"Interested in pricing\"\n    }\n  }\n}\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#api-documentation","level":2,"title":"API Documentation","text":"<p>The Leads API allows integration partners to fetch batched lead data and attribution logs programmatically.</p> <p>Access Restricted</p> <p>These endpoints are restricted to integration partners only. You must use the specific integration API key (<code>TOPKEE_INTEGRATION_API_KEY</code>) provided during onboarding.</p>","path":["External Integration"],"tags":[]},{"location":"external-integration/#authentication","level":3,"title":"Authentication","text":"<p>All API requests must include your Integration API Key in the <code>Authorization</code> header.</p> <pre><code>Authorization: Bearer &lt;TOPKEE_INTEGRATION_API_KEY&gt;\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#get-leads","level":3,"title":"Get Leads","text":"<p>Returns all records matching the date criteria.</p> <p>Endpoint: <code>GET /api/integrations/topkee/leads</code></p> <p>Query Parameters:</p> <ul> <li><code>limit</code> (optional): Number of records to return.</li> <li><code>from_date</code> (optional): ISO 8601 String. Return records created after this date.</li> <li><code>to_date</code> (optional): ISO 8601 String. Return records created before this date.</li> </ul> Request<pre><code>curl -X GET \\\n  \"https://chatbot.oomdigital.com/api/integrations/topkee/leads?limit=10\" \\\n  -H \"Authorization: Bearer &lt;TOPKEE_INTEGRATION_API_KEY&gt;\"\n</code></pre> Response<pre><code>{\n  \"data\": [\n    {\n      \"wa_inbound_source_correlation_id\": \"O-xY123z\",\n      \"conversation_id\": 105,\n      \"created_at\": \"2024-01-23T10:30:00.123Z\",\n      \"wa_inbound_source_correlated_at\": \"2024-01-23T10:35:00.456Z\",\n      \"wa_inbound_source_click_url\": \"https://example.com/landing?...\",\n      \"wa_inbound_source_parsed_params\": {\n        \"utm_source\": \"google\",\n        \"gclid\": \"AbCd123\"\n      }\n    }\n  ],\n  \"message\": \"Leads fetched successfully\"\n}\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#get-attribution-logs","level":3,"title":"Get Attribution Logs","text":"<p>Retrieves raw attribution logs (clicks), regardless of whether they converted to a lead. Returns a list of inbound source objects similar to the <code>widget.click</code> payload.</p> <p>Endpoint: <code>GET /api/integrations/topkee/attribution</code></p> Request<pre><code>curl -X GET \\\n  \"https://chatbot.oomdigital.com/api/integrations/topkee/attribution?limit=5\" \\\n  -H \"Authorization: Bearer &lt;TOPKEE_INTEGRATION_API_KEY&gt;\"\n</code></pre>","path":["External Integration"],"tags":[]},{"location":"external-integration/#error-codes","level":3,"title":"Error Codes","text":"Code Description 200 Success 401 Unauthorized (Invalid or missing API Key) 500 Internal Server Error","path":["External Integration"],"tags":[]}]}